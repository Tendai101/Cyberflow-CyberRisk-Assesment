<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Scores</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .low-score {
            background-color: #c8e6c9; /* Light green */
        }
        .high-score {
            background-color: #ef9a9a; /* Light red */
        }
    </style>
</head>
<body>
    <h2>User Scores</h2>
    {% if user_scores %}
    <table>
        <tr>
            <th>Network Score</th>
            <th>Inventory Score</th>
            <th>Digital Assets Score</th>
            <th>Third Party Score</th>
            <th>Data Flow Score</th>
            <th>Security Policies Score</th>
            <th>Patch Score</th>
            <th>Monitoring and Detection Score</th>
            <th>Incident Response Score</th>
            <th>Social Engineering Testing Score</th>
            <th>Business Location</th>
        </tr>
        {% for score_row in user_scores %}
        <tr>
            <td class="{% if score_row[1] is not none and score_row[1] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[1] }}</td>
            <td class="{% if score_row[2] is not none and score_row[2] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[2] }}</td>
            <td class="{% if score_row[3] is not none and score_row[3] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[3] }}</td>
            <td class="{% if score_row[4] is not none and score_row[4] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[4] }}</td>
            <td class="{% if score_row[5] is not none and score_row[5] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[5] }}</td>
            <td class="{% if score_row[6] is not none and score_row[6] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[6] }}</td>
            <td class="{% if score_row[7] is not none and score_row[7] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[7] }}</td>
            <td class="{% if score_row[8] is not none and score_row[8] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[8] }}</td>
            <td class="{% if score_row[9] is not none and score_row[9] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[9] }}</td>
            <td class="{% if score_row[10] is not none and score_row[10] < 3 %}low-score{% else %}high-score{% endif %}">{{ score_row[10] }}</td>
            <td>{{ score_row[11] }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>{{ error }}</p>
    {% endif %}
</body>
</html>
